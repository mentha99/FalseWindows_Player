<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>False Windows Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <video id="videoA" autoplay loop muted playsinline>
        <source src="hanging_OFF.mov" type="video/mp4">
    </video>

    <video id="videoB" muted playsinline style="display: none">
        <source src="hanging_ON.mov" type="video/mp4">
    </video>

    <div id="overlay">Tap to trigger</div>

    <script>
        const videoA = document.getElementById('videoA');
        const videoB = document.getElementById('videoB');
        const overlay = document.getElementById('overlay');

        function triggerB() {
            // prevent multiple clicks
            overlay.style.display = 'none';

            // Don't interrupt videoA immediately â€” wait for this loop to finish
            // Turn off automatic looping
            videoA.loop = false;

            // Add a one-time listener to run after current loop ends
            const onEnded = () => {
                videoA.removeEventListener('ended', onEnded); // clean up

                // Switch to B
                videoA.style.display = 'none';
                videoB.style.display = 'block';
                videoB.currentTime = 0;
                videoB.play();
            };

            videoA.addEventListener('ended', onEnded);
        }

        function returnToA() {
            videoB.pause();
            videoB.style.display = 'none';
            videoA.loop = true;

            videoA.style.display = 'block';
            videoA.play();

            overlay.style.display = 'block';
        }

        overlay.addEventListener('click', triggerB);
        videoB.addEventListener('ended', returnToA);
    </script>
</body>

</html>